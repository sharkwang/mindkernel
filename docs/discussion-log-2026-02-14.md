# Discussion Log — 2026-02-14

> 目的：记录本次从 `memory-v2` 演进到 `mindkernel` 的关键讨论与决策轨迹。
> 状态：归档文档（讨论记录），非主规范。

---

## 1) 讨论主线（摘要）

本次讨论从“记忆系统不好用”出发，逐步升级为“智能体心智系统工程”问题。核心演进：

1. 记忆问题不只是检索，而是缺少工程闭环。
2. 记忆应从事实中心升级为事件/时间/关联中心。
3. 遗忘是默认机制，巩固是条件触发。
4. 会话连续性与人格连续性应分离（双边界）。
5. 架构主干确定为：人格-认知-记忆。
6. 补入 Experience 作为记忆到认知的中间层。
7. 引入社会认知冲突治理与认知失调信号。
8. 引入反欺骗（记忆注入）调查与级联回滚。
9. 引入反偏执红队机制，避免系统保守僵化。
10. 引入情绪-冲动-行动快回路，与认知慢回路合流。
11. 项目改名为 **MindKernel（心智内核）**，重启主规范。
12. 需求工程基线建立（MR/CR/FR/NFR + Traceability）。
13. 进一步确认：认知不是“对/错”二值，必须支持未知态与分流策略。
14. 引入时间轴驱动遗忘机制，明确遗忘效率不应依赖全量扫描。
15. 将未知态治理与遗忘调度联动，避免无限挂起与学习停滞。

---

## 2) 关键决策时间线（按讨论阶段）

### 阶段 A：问题重定义（约 12:37-13:00）

- 用户指出：当前记忆体系存在明显问题，需要新项目。
- 共识：不是“记忆检索调参”，而是“心智架构重建”。
- 共识：人类记忆以事件、时间、关联为中心；遗忘是核心机制。

### 阶段 B：理论框架扩展（约 13:00-13:50）

- 共识：人机记忆应“同构能力 + 异构实现”。
- 共识：人格连续性 ≠ 会话连续性。
- 共识：采用“人格-认知-记忆”三层结构。
- 新增：Experience 层与人格冲突闸门。
- 新增：社会认知优先与认知失调治理。
- 新增：反欺骗调查与反馈闭环。
- 新增：偏执风险红队验证与控制。

### 阶段 C：行为动力学补充（约 15:05-15:10）

- 共识：事件刺激不仅转经验，还会经情绪产生冲动并影响行动。
- 新增：Affect-Impulse-Action 快回路，并要求行动前闸门调节。

### 阶段 D：项目重启与需求工程化（约 15:14-15:33）

- 决策：采用新项目名 **mindkernel**（心智内核）。
- 动作：旧文档迁移为 legacy，建立新主规范文档。
- 动作：先做“一页项目说明 + 需求工程基线”。
- 发现：当前版本可能导致心智僵化、自驱不足。
- 动作：新增反僵化与自驱学习的 MR/CR/FR/NFR 条款。

### 阶段 E：未知态深化（约 15:38-15:50）

- 问题：CR-9 过多人工介入可能降低效率。
- 优化：改为“分级自动验证 + 条件升级人工”。
- 共识：认知非二元，未知态需细分。
- 新增未知态分类：
  - `multipath`（多路径并存）
  - `out_of_scope`（超出认知范围）
  - `ontic_unknowable`（原理性不可知）
- 文档已更新：CR-10/CR-11、FR-15~FR-17、NFR-10~NFR-13。

### 阶段 F：时间轴遗忘机制（约 15:57-16:00）

- 问题：遗忘机制需要显式时间轴变量以保证执行效率。
- 共识：遗忘应采用“到期驱动调度”，而非全量扫描。
- 新增时间轴变量基线：
  - `created_at` / `last_accessed_at` / `last_reinforced_at`
  - `last_verified_at` / `review_due_at` / `stale_since`
  - `expires_at` / `uncertainty_ttl` / `next_action_at`
- 文档已更新：CR-12、FR-18~FR-21、NFR-14/NFR-15、2.10 时间轴变量基线。

### 阶段 G：设计文档工程化整理（约 16:00 后）

- 动作：将需求条款映射到 schema 草案目录（`schemas/`）。
- 新增草案：
  - `common-temporal.schema.json`
  - `persona.schema.json`
  - `memory.schema.json`
  - `experience.schema.json`
  - `cognition.schema.json`
- 动作：在主规范新增“数据契约映射”章节（2.11）与文档整理状态（2.12）。
- 动作：新增 `contents-map.md`，明确主规范/讨论/归档/schema 的关系与维护规则。

---

## 3) 当前已达成的稳定共识（可视作“已定原则”）

1. 人格边界是硬约束。
2. 记忆是证据，不是指令。
3. Experience 是记忆到认知的必经层。
4. 认知抽象必须通过人格冲突闸门。
5. 社会认知默认优先，但允许合法例外。
6. 反欺骗与反偏执必须共同优化。
7. 冲动不能绕过闸门直接驱动高风险行动。
8. 认知状态必须支持非二元（含未知态）。
9. 遗忘机制必须时间轴驱动，默认采用到期调度而非全量扫描。

---

## 4) 仍待进一步设计的问题（与主规范 OI 对齐）

- Experience 状态机最小状态数（5 vs 7）。
- 社会认知分层评分是否引入时效衰减。
- 冲动调节阈值标定方式。
- 治理作业自动化与人工职责分工。
- 探索预算分配策略。
- 关键事件显著性评分引擎选择。
- 认知状态迁移阈值。
- `uncertain` 人工升级率阈值。
- 未知态三分法自动判别机制。
- `ontic_unknowable` 的验证上限与退出条件。
- 时间衰减函数参数（`half_life`、`impact_weight`、`reinforcement_count`）定标。
- `next_action_at` 调度器实现方案（优先队列/时间轮/分区扫描）选择。

---

## 5) 文档关系

- 主规范：`docs/requirements-and-architecture.md`
- 历史草案：`archive/requirements-and-architecture.legacy.md`
- 本讨论记录：`docs/discussion-log-2026-02-14.md`

> 维护规则：后续新增讨论优先写入“讨论记录”，定稿后再进入“主规范”。
